<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }} | {{ site_title }}</title>
    <style>
        /* --- CSS RESET & BASE --- */
        body { margin: 0; padding: 0; font-family: 'Georgia', serif; background: #f4f4f4; color: #333; }
        * { box-sizing: border-box; }

        /* --- FIXED HEADER & NAV --- */
        header {
            position: fixed; top: 0; left: 0; right: 0;
            background: #fff; border-bottom: 2px solid #000;
            z-index: 1000; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .masthead {
            text-align: center; font-family: 'Times New Roman', serif; 
            font-weight: bold; font-size: 1.8rem; padding: 10px 0;
            text-transform: uppercase; letter-spacing: 1px;
        }
        nav {
            background: #222; overflow-x: auto; white-space: nowrap;
            padding: 0 10px; display: flex; justify-content: center;
        }
        nav a {
            display: inline-block; padding: 10px 15px; color: #fff;
            text-decoration: none; font-family: sans-serif; font-size: 0.9rem;
            text-transform: uppercase; font-weight: bold;
        }
        nav a:hover, nav a.active { background: #444; color: #ffd700; }

        /* --- MAIN CONTENT ADJUSTMENT --- */
        /* Padding top equals Header height (~100px) to prevent hiding content */
        .main-content { padding-top: 110px; padding-bottom: 40px; max-width: 800px; margin: 0 auto; min-height: 100vh;}
        
        /* --- MODAL (POPUP) STYLES --- */
        .modal-overlay {
            display: none; /* Hidden by default */
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); z-index: 2000;
            justify-content: center; align-items: center;
            padding: 20px;
        }
        .modal-overlay.open { display: flex; }
        
        .modal-content {
            background: #fff; width: 100%; max-width: 600px; max-height: 90vh;
            overflow-y: auto; padding: 25px; border-radius: 2px;
            position: relative; box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }
        .close-btn {
            position: absolute; top: 10px; right: 15px;
            font-size: 2rem; cursor: pointer; color: #888;
            line-height: 1;
        }
        .close-btn:hover { color: #000; }
        
        /* Modal Typography */
        #modal-headline { margin-top: 0; font-size: 1.8rem; line-height: 1.2; }
        #modal-image { width: 100%; height: auto; margin: 15px 0; border: 1px solid #ddd; display: none; }
        #modal-body { font-size: 1.1rem; line-height: 1.6; color: #444; }

    </style>
</head>
<body>

    <!-- STABLE HEADER -->
    <header>
        <div class="masthead">{{ site_title }}</div>
        <nav>
            <!-- Navigation Links -->
            <a href="index.html" class="{% if current_section == 'News' %}active{% endif %}">Front Page</a>
            {% for section in sections %}
                {% if section != 'News' %}
                <a href="section_{{ section | lower }}.html" class="{% if current_section == section %}active{% endif %}">{{ section }}</a>
                {% endif %}
            {% endfor %}
        </nav>
    </header>

    <!-- PAGE CONTENT INJECTED HERE -->
    <div class="main-content">
        {% block content %}{% endblock %}
    </div>

    <!-- SHARED MODAL COMPONENT -->
    <div id="story-modal" class="modal-overlay" onclick="closeModal(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <span class="close-btn" onclick="closeModal(event)">&times;</span>
            <h2 id="modal-headline">Headline</h2>
            <img id="modal-image" src="" alt="Story Image">
            <div id="modal-body">Story content goes here...</div>
        </div>
    </div>

    <script>
        // Open the modal and populate data
        function openModal(headline, imageSrc, text) {
            document.getElementById('modal-headline').innerText = headline;
            document.getElementById('modal-body').innerText = text;
            
            const imgEl = document.getElementById('modal-image');
            if (imageSrc && imageSrc !== 'None' && imageSrc !== '') {
                imgEl.src = imageSrc;
                imgEl.style.display = 'block';
            } else {
                imgEl.style.display = 'none';
            }

            document.getElementById('story-modal').classList.add('open');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        }

        // Close the modal
        function closeModal(event) {
            document.getElementById('story-modal').classList.remove('open');
            document.body.style.overflow = ''; // Restore scrolling
        }
    </script>

</body>
</html>